% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/make_ch3_db.R
\name{make_ch3_db}
\alias{make_ch3_db}
\title{Create a CH3 Database from Parquet Files}
\usage{
make_ch3_db(
  ch3_files,
  db_name,
  chrom = NULL,
  min_read_length = 50,
  min_call_prob = 0.9,
  min_base_qual = 30,
  flag = NULL
)
}
\arguments{
\item{ch3_files}{A character vector of file or directory paths containing CH3 Parquet files. 
If a directory is provided, all files within it will be processed.}

\item{db_name}{A string representing the path where the CH3 database will be created. 
The extension ".ch3.db" will be appended if not already present.}

\item{chrom}{An optional character string specifying a chromosome to filter the data. 
If NULL, all chromosomes will be included.}

\item{min_read_length}{A numeric value specifying the minimum read length required 
for inclusion in the database. Default is 50.}

\item{min_call_prob}{A numeric value representing the minimum call probability threshold. 
Only calls with a probability greater than or equal to this value will be included. Default is 0.9.}

\item{min_base_qual}{A numeric value representing the minimum base quality threshold. 
Only reads with quality scores at or above this value will be included. Default is 30.}

\item{flag}{An optional numeric value specifying a flag-based filter for the data. 
If NULL, no flag filtering is applied.}
}
\value{
A list of class `"ch3_db"`, containing:
\item{db_file}{The path to the created DuckDB database file.}
\item{tables}{A list of tables available in the database.}
}
\description{
This function processes a collection of CH3 files stored in Parquet format and creates 
a DuckDB database containing filtered and structured methylation call data.
}
\details{
This function reads CH3 files stored in Parquet format and imports them into a DuckDB database. 
The data is filtered based on user-specified criteria, including chromosome, read length, 
call probability, base quality, and flag values. If a table already exists in the database, 
it will be dropped and recreated.
}
\examples{
# Example usage
ch3_files <- system.file("new_test_data", package = "MethylSeqR")
db_name <- tempfile("example_ch3")

make_ch3_db(ch3_files, db_name)

}
